

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>Embedding a neuron model in a network model - In Silico Framework</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../../_static/sphinx_immaterial_theme.2d7f013d36e4da932.min.css?v=cc46594a" />
        <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
        <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
        <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=68b46a2d" />
        <link rel="stylesheet" type="text/css" href="../../_static/sphinx_paramlinks.css" />
        <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
        <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css?v=2aa19091" />
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#Registering-the-cell-morphology-in-the-desired-reference-frame" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="In Silico Framework" class="md-header__button md-logo" aria-label="In Silico Framework" data-md-component="logo">
      <img src="../../_static/isf-logo-white.png" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            In Silico Framework
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Embedding a neuron model in a network model
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mpinb/in_silico_framework" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    in_silico_framework
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../rst_assets/api_reference.html" class="md-tabs__link">
      <span title="/rst_assets/api_reference.rst (reference label)" class="md-ellipsis">API reference</span>
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="../../rst_assets/tutorials.html" class="md-tabs__link md-tabs__link--active">
      <span title="/rst_assets/tutorials.rst (reference label)" class="md-ellipsis">Tutorials</span>
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../rst_assets/installation.html" class="md-tabs__link">
      <span title="/rst_assets/installation.rst (reference label)" class="md-ellipsis">Installation</span>
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../rst_assets/file_formats.html" class="md-tabs__link">
      <span title="/rst_assets/file_formats.rst (reference label)" class="md-ellipsis">File &amp; data formats</span>
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../bibliography.html" class="md-tabs__link">
      <span title="/bibliography.rst (reference label)" class="md-ellipsis">Bibliography</span>
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="In Silico Framework" class="md-nav__button md-logo" aria-label="In Silico Framework" data-md-component="logo">
      <img src="../../_static/isf-logo-white.png" alt="logo">
    </a>
    In Silico Framework
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mpinb/in_silico_framework" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    in_silico_framework
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../rst_assets/api_reference.html" class="md-nav__link">
        <span title="/rst_assets/api_reference.rst (reference label)" class="md-ellipsis">API reference</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../rst_assets/tutorials.html"><span title="/rst_assets/tutorials.rst (reference label)" class="md-ellipsis">Tutorials</span></a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          <span title="/rst_assets/tutorials.rst (reference label)" class="md-ellipsis">Tutorials</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../Introduction_to_ISF.html" class="md-nav__link">
        <span title="/tutorials/introduction_to_isf.ipynb (reference label)" class="md-ellipsis">Welcome to the In Silico Framework <wbr>(ISF)</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../1.%20neuron%20models/1.1%20Simulation.html" class="md-nav__link">
        <span title="/tutorials/1. neuron models/1.1 simulation.ipynb (reference label)" class="md-ellipsis">Simulating biophysically detailed multi-<wbr>compartmental models using ISF</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../1.%20neuron%20models/1.2%20Evaluation.html" class="md-nav__link">
        <span title="/tutorials/1. neuron models/1.2 evaluation.ipynb (reference label)" class="md-ellipsis">Evaluating biophysically detailed multi-<wbr>compartmental models</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../1.%20neuron%20models/1.3%20Generation.html" class="md-nav__link">
        <span title="/tutorials/1. neuron models/1.3 generation.ipynb (reference label)" class="md-ellipsis">Generating biophysically detailed multi-<wbr>compartmental models</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb (reference label)" class="md-ellipsis">Embedding a neuron model in a network model</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb (reference label)" class="md-ellipsis">Embedding a neuron model in a network model</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#Registering-the-cell-morphology-in-the-desired-reference-frame" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#registering-the-cell-morphology-in-the-desired-reference-frame (reference label)" class="md-ellipsis">Registering the cell morphology in the desired reference frame</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Calculating-synapse-positions-on-the-neuron-morphology" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#calculating-synapse-positions-on-the-neuron-morphology (reference label)" class="md-ellipsis">Calculating synapse positions on the neuron morphology</span>
  </a>
  
    <nav class="md-nav" aria-label="Calculating synapse positions on the neuron morphology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Computing-it-yourself" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#computing-it-yourself (reference label)" class="md-ellipsis">Computing it yourself</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Copying-a-pre-computed-result" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#copying-a-pre-computed-result (reference label)" class="md-ellipsis">Copying a pre-<wbr>computed result</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Parallelizing-the-generation-of-anatomical-models" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#parallelizing-the-generation-of-anatomical-models (reference label)" class="md-ellipsis">Parallelizing the generation of anatomical models</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Inspecting-the-network-model" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#inspecting-the-network-model (reference label)" class="md-ellipsis">Inspecting the network model</span>
  </a>
  
    <nav class="md-nav" aria-label="Inspecting the network model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Visualization" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#visualization (reference label)" class="md-ellipsis">Visualization</span>
  </a>
  
    <nav class="md-nav" aria-label="Visualization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Plot-per-cell-type" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#plot-per-cell-type (reference label)" class="md-ellipsis">Plot per cell type</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Plot-per-column" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#plot-per-column (reference label)" class="md-ellipsis">Plot per column</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Inspecting-the-output-format" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#inspecting-the-output-format (reference label)" class="md-ellipsis">Inspecting the output format</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Compatibility-with-other-dense-connectome-models." class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#compatibility-with-other-dense-connectome-models. (reference label)" class="md-ellipsis">Compatibility with other dense connectome models.<wbr></span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Recap" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#recap (reference label)" class="md-ellipsis">Recap</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="2.2%20Network%20activity.html" class="md-nav__link">
        <span title="/tutorials/2. network models/2.2 network activity.ipynb (reference label)" class="md-ellipsis">Network activity</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../3.%20multiscale%20models/3.1%20Multiscale%20modeling.html" class="md-nav__link">
        <span title="/tutorials/3. multiscale models/3.1 multiscale modeling.ipynb (reference label)" class="md-ellipsis">Multi-<wbr>scale modeling</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../4.%20reduced%20models/4.1%20Generalized%20Linear%20Models.html" class="md-nav__link">
        <span title="/tutorials/4. reduced models/4.1 generalized linear models.ipynb (reference label)" class="md-ellipsis">Generalized Linear Models <wbr>(GLM)</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../rst_assets/installation.html" class="md-nav__link">
        <span title="/rst_assets/installation.rst (reference label)" class="md-ellipsis">Installation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../rst_assets/file_formats.html" class="md-nav__link">
        <span title="/rst_assets/file_formats.rst (reference label)" class="md-ellipsis">File &amp; data formats</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../bibliography.html" class="md-nav__link">
        <span title="/bibliography.rst (reference label)" class="md-ellipsis">Bibliography</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#Registering-the-cell-morphology-in-the-desired-reference-frame" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#registering-the-cell-morphology-in-the-desired-reference-frame (reference label)" class="md-ellipsis">Registering the cell morphology in the desired reference frame</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Calculating-synapse-positions-on-the-neuron-morphology" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#calculating-synapse-positions-on-the-neuron-morphology (reference label)" class="md-ellipsis">Calculating synapse positions on the neuron morphology</span>
  </a>
  
    <nav class="md-nav" aria-label="Calculating synapse positions on the neuron morphology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Computing-it-yourself" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#computing-it-yourself (reference label)" class="md-ellipsis">Computing it yourself</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Copying-a-pre-computed-result" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#copying-a-pre-computed-result (reference label)" class="md-ellipsis">Copying a pre-<wbr>computed result</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Parallelizing-the-generation-of-anatomical-models" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#parallelizing-the-generation-of-anatomical-models (reference label)" class="md-ellipsis">Parallelizing the generation of anatomical models</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Inspecting-the-network-model" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#inspecting-the-network-model (reference label)" class="md-ellipsis">Inspecting the network model</span>
  </a>
  
    <nav class="md-nav" aria-label="Inspecting the network model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Visualization" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#visualization (reference label)" class="md-ellipsis">Visualization</span>
  </a>
  
    <nav class="md-nav" aria-label="Visualization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Plot-per-cell-type" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#plot-per-cell-type (reference label)" class="md-ellipsis">Plot per cell type</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Plot-per-column" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#plot-per-column (reference label)" class="md-ellipsis">Plot per column</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Inspecting-the-output-format" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#inspecting-the-output-format (reference label)" class="md-ellipsis">Inspecting the output format</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Compatibility-with-other-dense-connectome-models." class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#compatibility-with-other-dense-connectome-models. (reference label)" class="md-ellipsis">Compatibility with other dense connectome models.<wbr></span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Recap" class="md-nav__link">
    <span title="/tutorials/2. network models/2.1 anatomical embedding.ipynb#recap (reference label)" class="md-ellipsis">Recap</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="Embedding-a-neuron-model-in-a-network-model">Embedding a neuron model in a network model<a class="headerlink" href="#Embedding-a-neuron-model-in-a-network-model" title="Permalink to this heading">¶</a></h1>
<p>This tutorial guides the user through how to use ISF to embed a neuron model in a dense connectome model, mapping synapses onto a neuron morphology based on empirical data. We provide a network modeling pipeline that has been described in detail in <a class="reference external" href="https://doi.org/10.1016/j.celrep.2022.110677">Udvary et al. (2022)</a>.</p>
<p>To generate such synapse maps from scratch, the user must download the <a class="reference external" href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/JZPULN">barrel cortex model</a> from harvard Dataverse:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><code>pixi<span class="w"> </span>run<span class="w"> </span>download_bc_model
</code></pre></div>
</div>
<p>To get started, adapt the desired output directory below:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[1]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="n">tutorial_output_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span><span class="si">}</span><span class="s2">/isf_tutorial_output&quot;</span>  <span class="c1"># &lt;-- Change this to your desired output directory</span>
</code></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[2]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">Interface</span> <span class="k">as</span> <span class="nn">I</span>
<span class="kn">from</span> <span class="nn">getting_started</span> <span class="kn">import</span> <span class="n">getting_started_dir</span>
<span class="n">example_data_dir</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">getting_started_dir</span><span class="p">,</span> <span class="s1">&#39;example_data&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">DataBase</span><span class="p">(</span><span class="n">tutorial_output_dir</span><span class="p">)</span><span class="o">.</span><span class="n">create_sub_db</span><span class="p">(</span><span class="s2">&quot;network_modeling&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[INFO] ISF: Current version: heads/data+0.gebc00ec75.dirty
[INFO] ISF: Current pid: 100207
[INFO] ISF: Loading mechanisms:
[ATTENTION] ISF: The source folder has uncommited changes!



[INFO] ISF: Loaded modules with __version__ attribute are:
IPython: 8.12.2, Interface: heads/data+0.gebc00ec75.dirty, PIL: 10.4.0, _brotli: 1.0.9, _csv: 1.0, _ctypes: 1.1.0, _curses: b&#39;2.2&#39;, _decimal: 1.70, argparse: 1.1, backcall: 0.2.0, blosc: 1.11.1, bluepyopt: 1.9.126, brotli: 1.0.9, certifi: 2024.08.30, cffi: 1.17.0, charset_normalizer: 3.4.0, click: 7.1.2, cloudpickle: 3.1.0, colorama: 0.4.6, comm: 0.2.2, csv: 1.0, ctypes: 1.1.0, cycler: 0.12.1, cytoolz: 0.12.3, dash: 2.18.2, dask: 2.30.0, dateutil: 2.9.0, deap: 1.4, debugpy: 1.8.5, decimal: 1.70, decorator: 5.1.1, defusedxml: 0.7.1, distributed: 2.30.0, distutils: 3.8.20, django: 1.8.19, entrypoints: 0.4, executing: 2.1.0, fasteners: 0.17.3, flask: 1.1.4, fsspec: 2024.10.0, future: 1.0.0, greenlet: 3.1.1, idna: 3.10, ipaddress: 1.0, ipykernel: 6.29.5, ipywidgets: 8.1.5, isf_pandas_msgpack: 0.2.2, itsdangerous: 1.1.0, jedi: 0.19.1, jinja2: 2.11.3, joblib: 1.4.2, json: 2.0.9, jupyter_client: 7.3.4, jupyter_core: 5.7.2, kiwisolver: 1.4.5, logging: 0.5.1.2, markupsafe: 2.0.1, matplotlib: 3.5.1, matplotlib_inline: 0.1.7, msgpack: 1.0.8, neuron: 7.8.2+, numcodecs: 0.12.1, numexpr: 2.8.6, numpy: 1.19.2, packaging: 24.2, pandas: 1.1.3, parameters: 0.2.1, parso: 0.8.4, past: 1.0.0, pexpect: 4.9.0, pickleshare: 0.7.5, platform: 1.0.8, platformdirs: 4.3.6, plotly: 5.24.1, prompt_toolkit: 3.0.48, psutil: 6.0.0, ptyprocess: 0.7.0, pure_eval: 0.2.3, pydevd: 2.9.5, pygments: 2.18.0, pyparsing: 3.1.4, pytz: 2024.2, re: 2.2.1, requests: 2.32.3, scandir: 1.10.0, scipy: 1.5.2, seaborn: 0.12.2, six: 1.16.0, sklearn: 0.23.2, socketserver: 0.4, socks: 1.7.1, sortedcontainers: 2.4.0, stack_data: 0.6.2, statsmodels: 0.13.2, sumatra: 0.7.4, tables: 3.8.0, tblib: 3.0.0, tlz: 0.12.3, toolz: 1.0.0, tqdm: 4.67.1, traitlets: 5.14.3, urllib3: 2.2.3, wcwidth: 0.2.13, werkzeug: 1.0.1, yaml: 5.3.1, zarr: 2.15.0, zlib: 1.0, zmq: 26.2.0, zstandard: 0.19.0
</pre></div></div>
</div>
<h2 id="Registering-the-cell-morphology-in-the-desired-reference-frame">Registering the cell morphology in the desired reference frame<a class="headerlink" href="#Registering-the-cell-morphology-in-the-desired-reference-frame" title="Permalink to this heading">¶</a></h2>
<p>The first step to embedding a neuron model into a network model, is to align the reference frames of both.</p>
<p>From external resources (e.g. the NeuroMorph pipeline), you need a morphology <code class="docutils literal notranslate"><span class="pre">.hoc</span></code>-file. The coordinates in the hoc morphology file need to be anchored at the desired location.</p>
<p>As an example, we provide such file of a Layer-5 Pyramidal Tract Neuron (L5PT), whose coordinates are anchored in the C2 column of a rat barrel cortex (BC)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[3]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">anatomy_dir</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">example_data_dir</span><span class="p">,</span> <span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">)</span>
<span class="n">I</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">anatomy_dir</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[3]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;89_L5_CDK20050712_nr6L5B_dend_PC_neuron_transform_registered_C2.hoc&#39;,
 &#39;86_L5_CDK20041214_nr3L5B_dend_PC_neuron_transform_registered_C2center_scaled_diameters.hoc&#39;,
 &#39;86_L5_CDK20041214_nr3L5B_dend_PC_neuron_transform_registered_C2center.swc&#39;,
 &#39;86_L5_CDK20041214_nr3L5B_dend_PC_neuron_transform_registered_C2center.hoc&#39;,
 &#39;example_embedding_86_C2_center&#39;,
 &#39;presynaptic_somata_soma_locations.csv&#39;,
 &#39;NumberOfConnectedCells.csv&#39;]
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[4]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">path_to_hoc</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
    <span class="n">anatomy_dir</span><span class="p">,</span>
    <span class="s1">&#39;86_L5_CDK20041214_nr3L5B_dend_PC_neuron_transform_registered_C2center.hoc&#39;</span><span class="p">)</span>
<span class="n">path_to_scaled_hoc</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
    <span class="n">anatomy_dir</span><span class="p">,</span>
    <span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">,</span> \
    <span class="s1">&#39;86_L5_CDK20041214_nr3L5B_dend_PC_neuron_transform_registered_C2center_scaled_diameters.hoc&#39;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<p>We copy these morphology files to our DataBase.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[5]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;anatomical_constraints&#39;</span> <span class="ow">in</span> <span class="n">db</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_managed_folder</span><span class="p">(</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">)</span>
    <span class="n">I</span><span class="o">.</span><span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">path_to_hoc</span><span class="p">,</span> <span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">])</span>
    <span class="n">I</span><span class="o">.</span><span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">path_to_scaled_hoc</span><span class="p">,</span> <span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">])</span>
</code></pre></div>
</div>
</div>
<h2 id="Calculating-synapse-positions-on-the-neuron-morphology">Calculating synapse positions on the neuron morphology<a class="headerlink" href="#Calculating-synapse-positions-on-the-neuron-morphology" title="Permalink to this heading">¶</a></h2>
<p>We use <a class="reference internal" href="../../autoapi/singlecell_input_mapper/index.html"><span class="doc">singlecell_input_mapper</span></a> to create an anatomical model of how that cell is integrated in the brain are (here: the barrel cortex). For more information on how this is done, see <a class="reference external" href="https://www.frontiersin.org/articles/10.3389/fnana.2014.00129/full">Egger et al. 2014</a>. This module creates an anatomical reconstruction of axo-dendritic connections depending on the spatial distribution of cells, bouton density, and anatomical constraints of
post-synaptic targets of the postsynaptic cell, such as morphology and synapse density. To do so, it needs the following input:</p>
<ol class="arabic simple">
<li><p>The neuron morphology (the <code class="docutils literal notranslate"><span class="pre">.hoc</span></code> file that we already copied over)</p></li>
<li><p>Density of total Post-Synaptic Target sites (PST) across the dendritic tree of the postynaptic cell (used for normalization)</p></li>
<li><p>Anatomical constraints of PSTs: the amount of synapses per length unit and area unit, depending on pre- and post-synaptic celltype, and the location along the dendritic tree of the postsynaptic cell. These are normalized using the previously mentioned PST densities.</p></li>
<li><p>Bouton densities across the entire brain area of interest.</p></li>
<li><p>Spatial distribution of cells, depending on their type.</p></li>
</ol>
<p>Under the hood, multiple anatomical realizations will be computed, all of which consistent with the input data. From this distribution of anatomical realizations, the one that is closest to the average is chosen, which can be refered to as a “representative realization”. The result is saved in the same folder as the hoc morphology. This takes about 4 hrs to compute, but you can continue with a precomputed result.</p>
<p>To compute it yourself, run the cell below. To copy a precomputed result, you can skip to the next code cell</p>
<h3 id="Computing-it-yourself">Computing it yourself<a class="headerlink" href="#Computing-it-yourself" title="Permalink to this heading">¶</a></h3>
<p>Here, we only use <span class="math notranslate nohighlight">\(2\)</span> samples. This is generally not enough to get a sufficiently large distribution to draw a representative sample from. In our experience, <span class="math notranslate nohighlight">\(50\)</span> samples is about enough to get a convergent distribution of synapse embeddings.</p>
<p>A sample size of <span class="math notranslate nohighlight">\(2\)</span> is however sufficient for the sake of this tutorial.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[ ]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">celltype</span> <span class="o">=</span> <span class="s1">&#39;L5tt&#39;</span>  <span class="c1"># Layer 5 thick-tufted</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;86_L5_CDK20041214_nr3L5B_dend_PC_neuron_transform_registered_C2center.hoc&#39;</span><span class="p">)</span>
<span class="n">I</span><span class="o">.</span><span class="n">map_singlecell_inputs</span><span class="p">(</span>
    <span class="n">cellName</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
    <span class="n">cellTypeName</span><span class="o">=</span><span class="n">celltype</span><span class="p">,</span>
    <span class="n">nrOfSamples</span><span class="o">=</span><span class="mi">2</span>  <span class="c1"># &lt;--- Increase this number to get more samples. 50 is sufficient for convergence, but 2 is faster</span>
<span class="p">)</span>

<span class="c1"># Adapt the path if you have generated a new anatomical model</span>
<span class="n">path_to_anatomical_model</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;example_embedding_86_C2_center&#39;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<h3 id="Copying-a-pre-computed-result">Copying a pre-computed result<a class="headerlink" href="#Copying-a-pre-computed-result" title="Permalink to this heading">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[7]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># Pre-computed result: --------------------</span>
<span class="kn">from</span> <span class="nn">distutils.dir_util</span> <span class="kn">import</span> <span class="n">copy_tree</span>
<span class="n">path_to_anatomical_model</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">anatomy_dir</span><span class="p">,</span> <span class="s2">&quot;example_embedding_86_C2_center&quot;</span><span class="p">)</span>
<span class="n">silent</span> <span class="o">=</span> <span class="n">copy_tree</span><span class="p">(</span><span class="n">path_to_anatomical_model</span><span class="p">,</span> <span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">])</span>
</code></pre></div>
</div>
</div>
<h3 id="Parallelizing-the-generation-of-anatomical-models">Parallelizing the generation of anatomical models<a class="headerlink" href="#Parallelizing-the-generation-of-anatomical-models" title="Permalink to this heading">¶</a></h3>
<p>We can use a dask <code class="docutils literal notranslate"><span class="pre">Client</span></code> to create our <code class="docutils literal notranslate"><span class="pre">.syn</span></code> and <code class="docutils literal notranslate"><span class="pre">.con</span></code> files for one morphology per process:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[ ]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">get_client</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">client</span>
</code></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[24]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">morphology_paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.hoc&#39;</span><span class="p">)]</span>
<span class="n">morphology_paths</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[24]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;/home/bgmeulem/isf_tutorial_output/network_modeling/db/anatomical_constraints/86_C2_center.hoc&#39;,
 &#39;/home/bgmeulem/isf_tutorial_output/network_modeling/db/anatomical_constraints/86_L5_CDK20041214_nr3L5B_dend_PC_neuron_transform_registered_C2center_scaled_diameters.hoc&#39;]
</pre></div></div>
</div>
<p>This takes as long as creating an anatomical realization for a single cell, but thanks to parallellization, not much longer than that. At least, until the amount of cells exceed the amount of available threads.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[ ]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">delayed_map_singlecell_inputs</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">dask</span><span class="o">.</span><span class="n">delayed</span><span class="p">(</span><span class="n">I</span><span class="o">.</span><span class="n">map_singlecell_inputs</span><span class="p">)</span>  <span class="c1"># make the single cell mapper a delayed function</span>
<span class="n">delayeds</span> <span class="o">=</span> <span class="p">[</span><span class="n">delayed_map_singlecell_inputs</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s1">&#39;L5tt&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">morphology_paths</span><span class="p">]</span> <span class="c1"># call it with the morphologies</span>
<span class="n">delayeds</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">dask</span><span class="o">.</span><span class="n">delayed</span><span class="p">(</span><span class="n">delayeds</span><span class="p">)</span> <span class="c1"># bundle everything in one delayed object</span>
<span class="n">futures</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">delayeds</span><span class="p">)</span>  <span class="c1"># compute the result</span>
</code></pre></div>
</div>
</div>
<p>You can restart the client to interrupt this computation if don’t want to compute this right now</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[ ]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">client</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<h2 id="Inspecting-the-network-model">Inspecting the network model<a class="headerlink" href="#Inspecting-the-network-model" title="Permalink to this heading">¶</a></h2>
<h3 id="Visualization">Visualization<a class="headerlink" href="#Visualization" title="Permalink to this heading">¶</a></h3>
<p>Let’s start by visualizing the locations of the somata to get a sense of our network model.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[26]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">landmarks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">cell_types</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">somata</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">I</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">anatomy_dir</span><span class="p">,</span> <span class="s2">&quot;presynaptic_somata_soma_locations.csv&quot;</span><span class="p">),</span>
    <span class="n">skiprows</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
    <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="s1">&#39;cell ID&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">]</span>
    <span class="p">)</span>
<span class="n">somata</span><span class="p">[[</span><span class="s1">&#39;cell_type&#39;</span><span class="p">,</span> <span class="s1">&#39;column&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">somata</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">somata</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[26]:
</code></pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Type</th>
      <th>cell ID</th>
      <th>x</th>
      <th>y</th>
      <th>z</th>
      <th>cell_type</th>
      <th>column</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>L45Peak_D1</td>
      <td>0</td>
      <td>-626.213</td>
      <td>20.344</td>
      <td>-58.270</td>
      <td>L45Peak</td>
      <td>D1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>L45Peak_D1</td>
      <td>1</td>
      <td>-320.834</td>
      <td>13.905</td>
      <td>-248.013</td>
      <td>L45Peak</td>
      <td>D1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>L45Peak_D1</td>
      <td>2</td>
      <td>-471.762</td>
      <td>100.233</td>
      <td>-114.434</td>
      <td>L45Peak</td>
      <td>D1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>L45Peak_D1</td>
      <td>3</td>
      <td>-423.770</td>
      <td>94.010</td>
      <td>-156.002</td>
      <td>L45Peak</td>
      <td>D1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>L45Peak_D1</td>
      <td>4</td>
      <td>-294.765</td>
      <td>145.499</td>
      <td>-241.157</td>
      <td>L45Peak</td>
      <td>D1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>19699</th>
      <td>L34_D3</td>
      <td>292</td>
      <td>485.718</td>
      <td>83.024</td>
      <td>122.828</td>
      <td>L34</td>
      <td>D3</td>
    </tr>
    <tr>
      <th>19700</th>
      <td>L34_D3</td>
      <td>293</td>
      <td>483.525</td>
      <td>-213.608</td>
      <td>190.240</td>
      <td>L34</td>
      <td>D3</td>
    </tr>
    <tr>
      <th>19701</th>
      <td>L34_D3</td>
      <td>294</td>
      <td>586.649</td>
      <td>-160.437</td>
      <td>98.395</td>
      <td>L34</td>
      <td>D3</td>
    </tr>
    <tr>
      <th>19702</th>
      <td>L34_D3</td>
      <td>295</td>
      <td>275.697</td>
      <td>189.550</td>
      <td>319.151</td>
      <td>L34</td>
      <td>D3</td>
    </tr>
    <tr>
      <th>19703</th>
      <td>L34_D3</td>
      <td>296</td>
      <td>588.751</td>
      <td>-7.494</td>
      <td>253.711</td>
      <td>L34</td>
      <td>D3</td>
    </tr>
  </tbody>
</table>
<p>19704 rows × 7 columns</p>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[27]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">I</span><span class="o">.</span><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;ggplot&#39;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<h4 id="Plot-per-cell-type">Plot per cell type<a class="headerlink" href="#Plot-per-cell-type" title="Permalink to this heading">¶</a></h4>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[28]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">fig</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_facecolor</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">view_init</span><span class="p">(</span><span class="n">azim</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">elev</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="k">for</span> <span class="n">cell_type</span><span class="p">,</span> <span class="n">pts</span> <span class="ow">in</span> <span class="n">somata</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;cell_type&quot;</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">pts</span><span class="p">[[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">T</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">cell_type</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
    <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
    <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span>
    <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Cell type&quot;</span><span class="p">)</span>
<span class="n">I</span><span class="o">.</span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_2._network_models_2.1_Anatomical_embedding_32_0.png" src="../../_images/tutorials_2._network_models_2.1_Anatomical_embedding_32_0.png" />
</div>
</div>
<h4 id="Plot-per-column">Plot per column<a class="headerlink" href="#Plot-per-column" title="Permalink to this heading">¶</a></h4>
<p>Since the barrel cortex is well-organized into recognizable columns, we can colorize the cells based on which column they belong to:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[29]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">fig</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_facecolor</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">view_init</span><span class="p">(</span><span class="n">azim</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">elev</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">pts</span> <span class="ow">in</span> <span class="n">somata</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;column&quot;</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">pts</span><span class="p">[[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">T</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="n">column</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
    <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
    <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span>
    <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Column&quot;</span><span class="p">)</span>
<span class="n">I</span><span class="o">.</span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_2._network_models_2.1_Anatomical_embedding_34_0.png" src="../../_images/tutorials_2._network_models_2.1_Anatomical_embedding_34_0.png" />
</div>
</div>
<h3 id="Inspecting-the-output-format">Inspecting the output format<a class="headerlink" href="#Inspecting-the-output-format" title="Permalink to this heading">¶</a></h3>
<p>In the directory generated by the singlecell_input_mapper, there are the following files:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[30]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[30]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;Loader.json&#39;,
 &#39;metadata.json&#39;,
 &#39;86_L5_CDK20041214_nr3L5B_dend_PC_neuron_transform_registered_C2center.hoc&#39;,
 &#39;86_L5_CDK20041214_nr3L5B_dend_PC_neuron_transform_registered_C2center_scaled_diameters.hoc&#39;,
 &#39;example_embedding_86_C2_center.con&#39;,
 &#39;example_embedding_86_C2_center.syn&#39;]
</pre></div></div>
</div>
<p>The most important files for making single-cell simulations are the <code class="docutils literal notranslate"><span class="pre">.con</span></code> file and the <code class="docutils literal notranslate"><span class="pre">.syn</span></code> file. These files are the relevant output of the <a class="reference internal" href="../../autoapi/singlecell_input_mapper/map_singlecell_inputs/index.html"><span class="doc">map_singlecell_inputs</span></a> pipeline.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.con</span></code> file maps presynaptic cells to a synapse. Not just a celltype, but all individual cells with a specific <code class="docutils literal notranslate"><span class="pre">cell</span> <span class="pre">ID</span></code> are mapped to an individual synapse with <code class="docutils literal notranslate"><span class="pre">synase</span> <span class="pre">ID</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[31]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">con_file</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s1">&#39;.con&#39;</span><span class="p">)</span>
<span class="n">con_file_path</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">con_file</span><span class="p">)</span>
<span class="n">con_file_path</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[31]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/home/bgmeulem/isf_tutorial_output/network_modeling/db/anatomical_constraints/example_embedding_86_C2_center.con&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[32]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">con_file_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()[:</span><span class="mi">300</span><span class="p">])</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
# Anatomical connectivity realization file; only valid with synapse realization:
# 86_C2_center.syn
# Type - cell ID - synapse ID

L6cc_A3 0       0
L6cc_A3 1       1
L6cc_A3 2       2
L6cc_A3 3       3
L6cc_A3 4       4
L6cc_A3 4       5
L6cc_A3 5       6
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.syn</span></code> file specifies the exact position of each synapse on the hoc morphology:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[33]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">syn_file_path</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">db</span><span class="p">[</span><span class="s1">&#39;anatomical_constraints&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s1">&#39;.syn&#39;</span><span class="p">))</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">syn_file_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()[:</span><span class="mi">300</span><span class="p">])</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
# Synapse distribution file
# corresponding to cell: 86_C2_center
# Type - section - section.x

VPM_E1  112     0.138046479525
VPM_E1  130     0.305058053119
VPM_E1  130     0.190509288017
VPM_E1  9       0.368760777084
VPM_E1  110     0.0
VPM_E1  11      0.120662910562
</pre></div></div>
</div>
<p>Here, section referes to the ID of the section in the cell object. x specifies, where along that section the synapse is placed. If x is 0, this is the beginning of the section, if x is one, this is the end of the section.</p>
<h2 id="Compatibility-with-other-dense-connectome-models.">Compatibility with other dense connectome models.<a class="headerlink" href="#Compatibility-with-other-dense-connectome-models." title="Permalink to this heading">¶</a></h2>
<p>ISF is not limited to this particular way of generating synapse locations. As long as a <code class="docutils literal notranslate"><span class="pre">.syn</span></code> and <code class="docutils literal notranslate"><span class="pre">.con</span></code> file can be distilled, any dense connectome model is compatible with ISF. All further workflows in ISF simply rely on these <code class="docutils literal notranslate"><span class="pre">.syn</span></code> and <code class="docutils literal notranslate"><span class="pre">.con</span></code> files, not on the input data that was necessary to generate these. in other words, the barrel cortex model as downloaded in the beginning of this tutorial is simply one example of a network model. Many other dense connectome models may be used.</p>
<h2 id="Recap">Recap<a class="headerlink" href="#Recap" title="Permalink to this heading">¶</a></h2>
<p>This tutorial provided a full pipeline on how to generate synapse locations for a given neuron morphology (i.e. an “anatomical network embedding”), and how to parallellize these for multiple morphologies.</p>
<p>In order to assign activity to these synapse realizations, consult the <a class="reference internal" href="2.2%20Network%20activity.html"><span class="doc">the next tutorial</span></a>.</p>






                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../1.%20neuron%20models/1.3%20Generation.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Generating biophysically detailed multi-compartmental models" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Generating biophysically detailed multi-compartmental models
            </div>
          </div>
        </a>
      
      
        
        <a href="2.2%20Network%20activity.html" class="md-footer__link md-footer__link--next" aria-label="Next: Network activity" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Network activity
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2025 Max Planck Institute for Neurobiology of Behavior - CAESAR.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    7.1.2.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../../_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script src="../../_static/tabs.js?v=3ee01567"></script>
        <script src="../../_static/js/video.js?v=a9b6335e"></script>
        <script src="../../_static/design-tabs.js?v=36754332"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script id="MathJax-script" src="../../_static/mathjax/tex-mml-chtml.js?v=cadf963e"></script>
    
  </body>
</html>
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>biophysics_fitting.hay_complete_default_setup &mdash; In-Silico Framework (ISF) 0.0.1 documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            In-Silico Framework (ISF)
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules/Interface.html">Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/SLURM_scripts.html">SLURM_scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/barrel_cortex.html">barrel_cortex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/biophysics_fitting.html">biophysics_fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/compatibility.html">compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/getting_started.html">getting_started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/mechanisms.html">mechanisms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/model_data_base.html">model_data_base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/nbrun.html">nbrun</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/project_specific_ipynb_code.html">project_specific_ipynb_code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/simrun2.html">simrun2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/simrun3.html">simrun3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/single_cell_analyzer.html">single_cell_analyzer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/single_cell_parser.html">single_cell_parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/singlecell_input_mapper.html">singlecell_input_mapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/spike_analysis.html">spike_analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/tests.html">tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/visualize.html">visualize</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">In-Silico Framework (ISF)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../biophysics_fitting.html">biophysics_fitting</a></li>
      <li class="breadcrumb-item active">biophysics_fitting.hay_complete_default_setup</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for biophysics_fitting.hay_complete_default_setup</h1><div class="highlight"><pre>
<span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Created on Nov 08, 2018</span>

<span class="sd">@author: abast</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>


<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Pool</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">single_cell_parser</span> <span class="k">as</span> <span class="nn">scp</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">setup_stim</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">tVec</span><span class="p">,</span> <span class="n">vmSoma</span><span class="p">,</span> <span class="n">vmApical</span>
<span class="kn">from</span> <span class="nn">.parameters</span> <span class="kn">import</span> <span class="n">set_fixed_params</span><span class="p">,</span> <span class="n">param_to_kwargs</span>

<span class="kn">from</span> <span class="nn">.simulator</span> <span class="kn">import</span> <span class="n">Simulator</span><span class="p">,</span> <span class="n">run_fun</span>
<span class="kn">from</span> <span class="nn">.L5tt_parameter_setup</span> <span class="kn">import</span> <span class="n">get_L5tt_template</span><span class="p">,</span> <span class="n">set_morphology</span><span class="p">,</span> <span class="n">set_ephys</span><span class="p">,</span> <span class="n">set_hot_zone</span><span class="p">,</span> <span class="n">set_param</span><span class="p">,</span> <span class="n">set_many_param</span>
<span class="c1"># moved to bottom to resolve circular import</span>
<span class="c1"># from .hay_evaluation import hay_evaluate_BAC, hay_evaluate_bAP, hay_evaluate_StepOne, hay_evaluate_StepTwo, hay_evaluate_StepThree</span>

<span class="kn">from</span> <span class="nn">.evaluator</span> <span class="kn">import</span> <span class="n">Evaluator</span>
<span class="kn">from</span> <span class="nn">toolz.dicttoolz</span> <span class="kn">import</span> <span class="n">merge</span>

<span class="kn">from</span> <span class="nn">.combiner</span> <span class="kn">import</span> <span class="n">Combiner</span>


<span class="c1">################################################</span>
<span class="c1"># Simulator</span>
<span class="c1">################################################</span>

<div class="viewcode-block" id="get_fixed_params_example"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.get_fixed_params_example">[docs]</a><span class="k">def</span> <span class="nf">get_fixed_params_example</span><span class="p">():</span>
    <span class="n">fixed_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hot_zone.max_&#39;</span><span class="p">:</span> <span class="mi">614</span><span class="p">,</span> 
                           <span class="s1">&#39;hot_zone.min_&#39;</span><span class="p">:</span> <span class="mi">414</span><span class="p">,</span>
                           <span class="s1">&#39;bAP.hay_measure.recSite1&#39;</span><span class="p">:</span> <span class="mi">349</span><span class="p">,</span>
                           <span class="s1">&#39;bAP.hay_measure.recSite2&#39;</span><span class="p">:</span> <span class="mi">529</span><span class="p">,</span>                            
                           <span class="s1">&#39;BAC.stim.dist&#39;</span><span class="p">:</span> <span class="mi">349</span><span class="p">,</span>
                           <span class="s1">&#39;BAC.hay_measure.recSite&#39;</span><span class="p">:</span> <span class="mi">349</span><span class="p">,</span>                            
                           <span class="s1">&#39;morphology.filename&#39;</span><span class="p">:</span> <span class="s1">&#39;/nas1/Data_arco/project_src/in_silico_framework/biophysics_fitting/MOEA_EH_minimal/morphology/89_L5_CDK20050712_nr6L5B_dend_PC_neuron_transform_registered_C2.hoc&#39;</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">fixed_params</span></div>

<div class="viewcode-block" id="record_bAP"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.record_bAP">[docs]</a><span class="k">def</span> <span class="nf">record_bAP</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">recSite1</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">recSite2</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">recSite1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">recSite2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;tVec&#39;</span><span class="p">:</span> <span class="n">tVec</span><span class="p">(</span><span class="n">cell</span><span class="p">),</span> 
            <span class="s1">&#39;vList&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">vmSoma</span><span class="p">(</span><span class="n">cell</span><span class="p">),</span> <span class="n">vmApical</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">recSite1</span><span class="p">),</span> <span class="n">vmApical</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">recSite2</span><span class="p">))}</span></div>

<div class="viewcode-block" id="record_BAC"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.record_BAC">[docs]</a><span class="k">def</span> <span class="nf">record_BAC</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">recSite</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;tVec&#39;</span><span class="p">:</span> <span class="n">tVec</span><span class="p">(</span><span class="n">cell</span><span class="p">),</span> 
            <span class="s1">&#39;vList&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">vmSoma</span><span class="p">(</span><span class="n">cell</span><span class="p">),</span> <span class="n">vmApical</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">recSite</span><span class="p">))}</span></div>

<div class="viewcode-block" id="record_Step"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.record_Step">[docs]</a><span class="k">def</span> <span class="nf">record_Step</span><span class="p">(</span><span class="n">cell</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;tVec&#39;</span><span class="p">:</span> <span class="n">tVec</span><span class="p">(</span><span class="n">cell</span><span class="p">),</span> 
            <span class="s1">&#39;vList&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">vmSoma</span><span class="p">(</span><span class="n">cell</span><span class="p">)]}</span></div>

<div class="viewcode-block" id="get_Simulator"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.get_Simulator">[docs]</a><span class="k">def</span> <span class="nf">get_Simulator</span><span class="p">(</span><span class="n">fixed_params</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">cell_param_generator</span> <span class="o">=</span> <span class="n">get_L5tt_template</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">params_modify_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;fixed_params&#39;</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="n">set_fixed_params</span><span class="p">,</span> <span class="n">fixed_params</span> <span class="o">=</span> <span class="n">fixed_params</span><span class="p">)])</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">cell_param_modify_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;morphology&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">set_morphology</span><span class="p">)])</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">cell_param_modify_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;ephys&#39;</span><span class="p">,</span> <span class="n">set_ephys</span><span class="p">])</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">cell_param_modify_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="n">set_param</span><span class="p">])</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">cell_param_modify_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;many_params&#39;</span><span class="p">,</span> <span class="n">set_many_param</span><span class="p">])</span>
    
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">cell_param_modify_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;hot_zone&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">set_hot_zone</span><span class="p">)])</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">cell_generator</span> <span class="o">=</span> <span class="n">scp</span><span class="o">.</span><span class="n">create_cell</span>
    <span class="c1">#s.setup.cell_modify_funs.append(&#39;apical_dendrite_scaling&#39;, apical_dendrite_scaling)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_setup_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;bAP.stim&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">setup_stim</span><span class="o">.</span><span class="n">setup_bAP</span><span class="p">)])</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_setup_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;BAC.stim&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">setup_stim</span><span class="o">.</span><span class="n">setup_BAC</span><span class="p">)])</span>
    <span class="k">if</span> <span class="n">step</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_setup_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepOne.stim&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">setup_stim</span><span class="o">.</span><span class="n">setup_StepOne</span><span class="p">)])</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_setup_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepTwo.stim&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">setup_stim</span><span class="o">.</span><span class="n">setup_StepTwo</span><span class="p">)])</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_setup_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepThree.stim&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">setup_stim</span><span class="o">.</span><span class="n">setup_StepThree</span><span class="p">)])</span>
    <span class="n">run_fun_bAP_BAC</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">run_fun</span><span class="p">,</span> <span class="n">T</span> <span class="o">=</span> <span class="mf">34.0</span><span class="p">,</span> <span class="n">Vinit</span> <span class="o">=</span> <span class="o">-</span><span class="mf">75.0</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="mf">0.025</span><span class="p">,</span> <span class="n">recordingSites</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">tStart</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">tStop</span> <span class="o">=</span> <span class="mf">600.0</span><span class="p">,</span> <span class="n">vardt</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_run_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;bAP.run&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">run_fun_bAP_BAC</span><span class="p">)])</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_run_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;BAC.run&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">run_fun_bAP_BAC</span><span class="p">)])</span>
    <span class="n">run_fun_Step</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">run_fun</span><span class="p">,</span> <span class="n">T</span> <span class="o">=</span> <span class="mf">34.0</span><span class="p">,</span> <span class="n">Vinit</span> <span class="o">=</span> <span class="o">-</span><span class="mf">75.0</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="mf">0.025</span><span class="p">,</span> <span class="n">recordingSites</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">tStart</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">tStop</span> <span class="o">=</span> <span class="mf">3000.0</span><span class="p">,</span> <span class="n">vardt</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">step</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_run_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepOne.run&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">run_fun_Step</span><span class="p">)])</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_run_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepTwo.run&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">run_fun_Step</span><span class="p">)])</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_run_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepThree.run&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">run_fun_Step</span><span class="p">)])</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_response_measure_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;bAP.hay_measure&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">record_bAP</span><span class="p">)])</span>
    <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_response_measure_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;BAC.hay_measure&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">record_BAC</span><span class="p">)])</span>
    <span class="k">if</span> <span class="n">step</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_response_measure_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepOne.hay_measure&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">record_Step</span><span class="p">)])</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_response_measure_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepTwo.hay_measure&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">record_Step</span><span class="p">)])</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">stim_response_measure_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepThree.hay_measure&#39;</span><span class="p">,</span> <span class="n">param_to_kwargs</span><span class="p">(</span><span class="n">record_Step</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">s</span></div>

<span class="c1">######################################################</span>
<span class="c1"># Evaluator</span>
<span class="c1">######################################################</span>

<div class="viewcode-block" id="interpolate_vt"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.interpolate_vt">[docs]</a><span class="k">def</span> <span class="nf">interpolate_vt</span><span class="p">(</span><span class="n">voltage_trace_</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">voltage_trace_</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">voltage_trace_</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s1">&#39;tVec&#39;</span><span class="p">]</span>
        <span class="n">t_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="mf">0.025</span><span class="p">)</span>
        <span class="n">vList_new</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">t_new</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">voltage_trace_</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s1">&#39;vList&#39;</span><span class="p">]]</span> <span class="c1"># I.np.interp</span>
        <span class="n">out</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;tVec&#39;</span><span class="p">:</span> <span class="n">t_new</span><span class="p">,</span> <span class="s1">&#39;vList&#39;</span><span class="p">:</span> <span class="n">vList_new</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">out</span></div>

<div class="viewcode-block" id="get_Evaluator"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.get_Evaluator">[docs]</a><span class="k">def</span> <span class="nf">get_Evaluator</span><span class="p">(</span><span class="n">step</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">interpolate_voltage_trace</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="n">e</span> <span class="o">=</span> <span class="n">Evaluator</span><span class="p">()</span>
    
    <span class="k">if</span> <span class="n">interpolate_voltage_trace</span><span class="p">:</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">pre_funs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">interpolate_vt</span><span class="p">)</span>
        
    <span class="n">e</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">evaluate_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;BAC.hay_measure&#39;</span><span class="p">,</span> 
                                <span class="n">hay_evaluate_BAC</span><span class="p">,</span> 
                                <span class="s1">&#39;BAC.hay_features&#39;</span><span class="p">])</span>

    <span class="n">e</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">evaluate_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;bAP.hay_measure&#39;</span><span class="p">,</span> 
                                <span class="n">hay_evaluate_bAP</span><span class="p">,</span> 
                                <span class="s1">&#39;bAP.hay_features&#39;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">step</span><span class="p">:</span>
        <span class="n">e</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">evaluate_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepOne.hay_measure&#39;</span><span class="p">,</span> 
                                    <span class="n">hay_evaluate_StepOne</span><span class="p">,</span> 
                                    <span class="s1">&#39;StepOne.hay_features&#39;</span><span class="p">])</span>
        
        <span class="n">e</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">evaluate_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepTwo.hay_measure&#39;</span><span class="p">,</span> 
                                    <span class="n">hay_evaluate_StepTwo</span><span class="p">,</span> 
                                    <span class="s1">&#39;StepTwo.hay_features&#39;</span><span class="p">])</span>
        
        <span class="n">e</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">evaluate_funs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;StepThree.hay_measure&#39;</span><span class="p">,</span> 
                                    <span class="n">hay_evaluate_StepThree</span><span class="p">,</span> 
                                    <span class="s1">&#39;StepThree.hay_features&#39;</span><span class="p">])</span>
    <span class="n">e</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">finalize_funs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">merge</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">())))</span>    
    <span class="k">return</span> <span class="n">e</span></div>

<span class="c1">##############################################################</span>
<span class="c1"># Combiner</span>
<span class="c1">##############################################################</span>

<div class="viewcode-block" id="get_Combiner"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.get_Combiner">[docs]</a><span class="k">def</span> <span class="nf">get_Combiner</span><span class="p">(</span><span class="n">step</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">include_DI3</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="c1">#up to 20220325, DI3 has not been included and was not in the fit_features file. </span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">Combiner</span><span class="p">()</span>
    <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;bAP_somatic_spike&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;bAP_APwidth&#39;</span><span class="p">,</span> <span class="s1">&#39;bAP_APheight&#39;</span><span class="p">,</span> <span class="s1">&#39;bAP_spikecount&#39;</span><span class="p">])</span>
    <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;bAP&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;bAP_att2&#39;</span><span class="p">,</span> <span class="s1">&#39;bAP_att3&#39;</span><span class="p">])</span>
    <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;BAC_somatic&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;BAC_ahpdepth&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC_APheight&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC_ISI&#39;</span><span class="p">])</span>
    <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;BAC_caSpike&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;BAC_caSpike_height&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC_caSpike_width&#39;</span><span class="p">])</span>
    <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;BAC_spikecount&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;BAC_spikecount&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">step</span><span class="p">:</span> 
        <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;step_mean_frequency&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;mf1&#39;</span><span class="p">,</span> <span class="s1">&#39;mf2&#39;</span><span class="p">,</span> <span class="s1">&#39;mf3&#39;</span><span class="p">])</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;step_AI_ISIcv&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;AI1&#39;</span><span class="p">,</span> <span class="s1">&#39;AI2&#39;</span><span class="p">,</span> <span class="s1">&#39;ISIcv1&#39;</span><span class="p">,</span> <span class="s1">&#39;ISIcv2&#39;</span><span class="p">,</span> <span class="s1">&#39;AI3&#39;</span><span class="p">,</span> <span class="s1">&#39;ISIcv3&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">include_DI3</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;step_doublet_ISI&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;DI1&#39;</span><span class="p">,</span> <span class="s1">&#39;DI2, DI3&#39;</span><span class="p">])</span>            
        <span class="k">else</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;step_doublet_ISI&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;DI1&#39;</span><span class="p">,</span> <span class="s1">&#39;DI2&#39;</span><span class="p">])</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;step_AP_height&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;APh1&#39;</span><span class="p">,</span> <span class="s1">&#39;APh2&#39;</span><span class="p">,</span> <span class="s1">&#39;APh3&#39;</span><span class="p">])</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;step_time_to_first_spike&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;TTFS1&#39;</span><span class="p">,</span> <span class="s1">&#39;TTFS2&#39;</span><span class="p">,</span> <span class="s1">&#39;TTFS3&#39;</span><span class="p">])</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;step_AHP_depth&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;fAHPd1&#39;</span><span class="p">,</span> <span class="s1">&#39;fAHPd2&#39;</span><span class="p">,</span> <span class="s1">&#39;fAHPd3&#39;</span><span class="p">,</span> <span class="s1">&#39;sAHPd1&#39;</span><span class="p">,</span> <span class="s1">&#39;sAHPd2&#39;</span><span class="p">,</span> <span class="s1">&#39;sAHPd3&#39;</span><span class="p">])</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;step_AHP_slow_time&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;sAHPt1&#39;</span><span class="p">,</span> <span class="s1">&#39;sAHPt2&#39;</span><span class="p">,</span> <span class="s1">&#39;sAHPt3&#39;</span><span class="p">])</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;step_AP_width&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;APw1&#39;</span><span class="p">,</span> <span class="s1">&#39;APw2&#39;</span><span class="p">,</span> <span class="s1">&#39;APw3&#39;</span><span class="p">])</span>
    <span class="n">c</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">combinefun</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span>
    <span class="k">return</span> <span class="n">c</span></div>



<span class="c1">##############################################</span>
<span class="c1"># hay parameters: parameterboundaries ...</span>
<span class="c1">##############################################</span>

<div class="viewcode-block" id="get_hay_objective_names"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.get_hay_objective_names">[docs]</a><span class="k">def</span> <span class="nf">get_hay_objective_names</span><span class="p">():</span>
    <span class="k">return</span>  <span class="p">[</span><span class="s1">&#39;bAP_APwidth&#39;</span><span class="p">,</span> <span class="s1">&#39;bAP_APheight&#39;</span><span class="p">,</span> <span class="s1">&#39;bAP_spikecount&#39;</span><span class="p">,</span> <span class="s1">&#39;bAP_att2&#39;</span><span class="p">,</span> 
             <span class="s1">&#39;bAP_att3&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC_ahpdepth&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC_APheight&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC_ISI&#39;</span><span class="p">,</span> 
             <span class="s1">&#39;BAC_caSpike_height&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC_caSpike_width&#39;</span><span class="p">,</span> <span class="s1">&#39;BAC_spikecount&#39;</span><span class="p">,</span>
             <span class="s1">&#39;mf1&#39;</span><span class="p">,</span> <span class="s1">&#39;mf2&#39;</span><span class="p">,</span> <span class="s1">&#39;mf3&#39;</span><span class="p">,</span> <span class="s1">&#39;AI1&#39;</span><span class="p">,</span> <span class="s1">&#39;AI2&#39;</span><span class="p">,</span> <span class="s1">&#39;ISIcv1&#39;</span><span class="p">,</span> <span class="s1">&#39;ISIcv2&#39;</span><span class="p">,</span>
             <span class="s1">&#39;AI3&#39;</span><span class="p">,</span> <span class="s1">&#39;ISIcv3&#39;</span><span class="p">,</span> <span class="s1">&#39;DI1&#39;</span><span class="p">,</span> <span class="s1">&#39;DI2&#39;</span><span class="p">,</span> <span class="s1">&#39;APh1&#39;</span><span class="p">,</span> <span class="s1">&#39;APh2&#39;</span><span class="p">,</span> <span class="s1">&#39;APh3&#39;</span><span class="p">,</span>
             <span class="s1">&#39;TTFS1&#39;</span><span class="p">,</span> <span class="s1">&#39;TTFS2&#39;</span><span class="p">,</span> <span class="s1">&#39;TTFS3&#39;</span><span class="p">,</span> <span class="s1">&#39;fAHPd1&#39;</span><span class="p">,</span> <span class="s1">&#39;fAHPd2&#39;</span><span class="p">,</span> <span class="s1">&#39;fAHPd3&#39;</span><span class="p">,</span>
             <span class="s1">&#39;sAHPd1&#39;</span><span class="p">,</span> <span class="s1">&#39;sAHPd2&#39;</span><span class="p">,</span> <span class="s1">&#39;sAHPd3&#39;</span><span class="p">,</span> <span class="s1">&#39;sAHPt1&#39;</span><span class="p">,</span> <span class="s1">&#39;sAHPt2&#39;</span><span class="p">,</span> <span class="s1">&#39;sAHPt3&#39;</span><span class="p">,</span>
             <span class="s1">&#39;APw1&#39;</span><span class="p">,</span> <span class="s1">&#39;APw2&#39;</span><span class="p">,</span> <span class="s1">&#39;APw3&#39;</span><span class="p">]</span></div>
<div class="viewcode-block" id="get_hay_param_names"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.get_hay_param_names">[docs]</a><span class="k">def</span> <span class="nf">get_hay_param_names</span><span class="p">():</span>
        <span class="k">return</span>      <span class="p">[</span><span class="s1">&#39;NaTa_t.soma.gNaTa_tbar&#39;</span><span class="p">,</span><span class="s1">&#39;Nap_Et2.soma.gNap_Et2bar&#39;</span><span class="p">,</span><span class="s1">&#39;K_Pst.soma.gK_Pstbar&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;K_Tst.soma.gK_Tstbar&#39;</span><span class="p">,</span><span class="s1">&#39;SK_E2.soma.gSK_E2bar&#39;</span><span class="p">,</span><span class="s1">&#39;SKv3_1.soma.gSKv3_1bar&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Ca_HVA.soma.gCa_HVAbar&#39;</span><span class="p">,</span><span class="s1">&#39;Ca_LVAst.soma.gCa_LVAstbar&#39;</span><span class="p">,</span><span class="s1">&#39;CaDynamics_E2.soma.gamma&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;CaDynamics_E2.soma.decay&#39;</span><span class="p">,</span><span class="s1">&#39;NaTa_t.axon.gNaTa_tbar&#39;</span><span class="p">,</span><span class="s1">&#39;Nap_Et2.axon.gNap_Et2bar&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;K_Pst.axon.gK_Pstbar&#39;</span><span class="p">,</span><span class="s1">&#39;K_Tst.axon.gK_Tstbar&#39;</span><span class="p">,</span><span class="s1">&#39;SK_E2.axon.gSK_E2bar&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;SKv3_1.axon.gSKv3_1bar&#39;</span><span class="p">,</span><span class="s1">&#39;Ca_HVA.axon.gCa_HVAbar&#39;</span><span class="p">,</span><span class="s1">&#39;Ca_LVAst.axon.gCa_LVAstbar&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;CaDynamics_E2.axon.gamma&#39;</span><span class="p">,</span><span class="s1">&#39;CaDynamics_E2.axon.decay&#39;</span><span class="p">,</span><span class="s1">&#39;none.soma.g_pas&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;none.axon.g_pas&#39;</span><span class="p">,</span><span class="s1">&#39;none.dend.g_pas&#39;</span><span class="p">,</span><span class="s1">&#39;none.apic.g_pas&#39;</span><span class="p">,</span><span class="s1">&#39;Im.apic.gImbar&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;NaTa_t.apic.gNaTa_tbar&#39;</span><span class="p">,</span><span class="s1">&#39;SKv3_1.apic.gSKv3_1bar&#39;</span><span class="p">,</span><span class="s1">&#39;Ca_HVA.apic.gCa_HVAbar&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;Ca_LVAst.apic.gCa_LVAstbar&#39;</span><span class="p">,</span><span class="s1">&#39;SK_E2.apic.gSK_E2bar&#39;</span><span class="p">,</span><span class="s1">&#39;CaDynamics_E2.apic.gamma&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;CaDynamics_E2.apic.decay&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="get_hay_params_pdf"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.get_hay_params_pdf">[docs]</a><span class="k">def</span> <span class="nf">get_hay_params_pdf</span><span class="p">():</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">1000.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span>
                 <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span>  <span class="mf">0.1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">1000.0</span><span class="p">,</span> <span class="mf">5.02e-05</span><span class="p">,</span> <span class="mf">5.0e-05</span><span class="p">,</span>
                 <span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">],</span>
     <span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0005</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
             <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0005</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">2.0e-05</span><span class="p">,</span> <span class="mf">2.0e-05</span><span class="p">,</span>
             <span class="mf">3.0e-05</span><span class="p">,</span> <span class="mf">3.0e-05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0005</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">],</span>
     <span class="s1">&#39;param_names&#39;</span><span class="p">:</span> <span class="n">get_hay_param_names</span><span class="p">()}</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;param_names&#39;</span><span class="p">,</span> <span class="n">drop</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)[[</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">]]</span></div>

<div class="viewcode-block" id="get_hay_problem_description"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.get_hay_problem_description">[docs]</a><span class="k">def</span> <span class="nf">get_hay_problem_description</span><span class="p">():</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;feature&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Spikecount&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;AP_height&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;AP_width&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;BPAPatt2&#39;</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;BPAPatt3&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;AHP_depth_abs&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="s1">&#39;AP_height&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="s1">&#39;BAC_ISI&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="s1">&#39;BAC_caSpike_height&#39;</span><span class="p">,</span>
    <span class="mi">9</span><span class="p">:</span> <span class="s1">&#39;BAC_caSpike_width&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="s1">&#39;Spikecount&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="s1">&#39;mean_frequency2&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="s1">&#39;adaptation_index2&#39;</span><span class="p">,</span>
    <span class="mi">13</span><span class="p">:</span> <span class="s1">&#39;ISI_CV&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="s1">&#39;doublet_ISI&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="s1">&#39;time_to_first_spike&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="s1">&#39;AP_height&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="s1">&#39;AHP_depth_abs_fast&#39;</span><span class="p">,</span>
    <span class="mi">18</span><span class="p">:</span> <span class="s1">&#39;AHP_depth_abs_slow&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="s1">&#39;AHP_slow_time&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="s1">&#39;AP_width&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">:</span> <span class="s1">&#39;mean_frequency2&#39;</span><span class="p">,</span>
    <span class="mi">22</span><span class="p">:</span> <span class="s1">&#39;adaptation_index2&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">:</span> <span class="s1">&#39;ISI_CV&#39;</span><span class="p">,</span> <span class="mi">24</span><span class="p">:</span> <span class="s1">&#39;doublet_ISI&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">:</span> <span class="s1">&#39;time_to_first_spike&#39;</span><span class="p">,</span> <span class="mi">26</span><span class="p">:</span> <span class="s1">&#39;AP_height&#39;</span><span class="p">,</span>
    <span class="mi">27</span><span class="p">:</span> <span class="s1">&#39;AHP_depth_abs_fast&#39;</span><span class="p">,</span>  <span class="mi">28</span><span class="p">:</span> <span class="s1">&#39;AHP_depth_abs_slow&#39;</span><span class="p">,</span> <span class="mi">29</span><span class="p">:</span> <span class="s1">&#39;AHP_slow_time&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">:</span> <span class="s1">&#39;AP_width&#39;</span><span class="p">,</span>
    <span class="mi">31</span><span class="p">:</span> <span class="s1">&#39;mean_frequency2&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">:</span> <span class="s1">&#39;adaptation_index2&#39;</span><span class="p">,</span> <span class="mi">33</span><span class="p">:</span> <span class="s1">&#39;ISI_CV&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">:</span> <span class="s1">&#39;time_to_first_spike&#39;</span><span class="p">,</span>
    <span class="mi">35</span><span class="p">:</span> <span class="s1">&#39;AP_height&#39;</span><span class="p">,</span> <span class="mi">36</span><span class="p">:</span> <span class="s1">&#39;AHP_depth_abs_fast&#39;</span><span class="p">,</span> <span class="mi">37</span><span class="p">:</span> <span class="s1">&#39;AHP_depth_abs_slow&#39;</span><span class="p">,</span> <span class="mi">38</span><span class="p">:</span> <span class="s1">&#39;AHP_slow_time&#39;</span><span class="p">,</span> <span class="mi">39</span><span class="p">:</span> <span class="s1">&#39;AP_width&#39;</span><span class="p">},</span>
    <span class="s1">&#39;mean&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">45.0</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mf">36.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="o">-</span><span class="mf">65.0</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mf">9.9009999999999998</span><span class="p">,</span>
    <span class="mi">8</span><span class="p">:</span> <span class="mf">6.7300000000000004</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mf">37.43</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mf">0.0035999999999999999</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mf">0.12039999999999999</span><span class="p">,</span>
    <span class="mi">14</span><span class="p">:</span> <span class="mf">57.75</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mf">43.25</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mf">26.227399999999999</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="o">-</span><span class="mf">51.951099999999997</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="o">-</span><span class="mf">58.0443</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mf">0.23760000000000001</span><span class="p">,</span>
    <span class="mi">20</span><span class="p">:</span> <span class="mf">1.3077000000000001</span><span class="p">,</span> <span class="mi">21</span><span class="p">:</span> <span class="mf">14.5</span><span class="p">,</span> <span class="mi">22</span><span class="p">:</span> <span class="mf">0.0023</span><span class="p">,</span> <span class="mi">23</span><span class="p">:</span> <span class="mf">0.10829999999999999</span><span class="p">,</span> <span class="mi">24</span><span class="p">:</span> <span class="mf">6.625</span><span class="p">,</span> <span class="mi">25</span><span class="p">:</span> <span class="mf">19.125</span><span class="p">,</span> 
    <span class="mi">26</span><span class="p">:</span> <span class="mf">16.520900000000001</span><span class="p">,</span> <span class="mi">27</span><span class="p">:</span> <span class="o">-</span><span class="mf">54.194899999999997</span><span class="p">,</span> <span class="mi">28</span><span class="p">:</span> <span class="o">-</span><span class="mf">60.512900000000002</span><span class="p">,</span> <span class="mi">29</span><span class="p">:</span> <span class="mf">0.2787</span><span class="p">,</span> <span class="mi">30</span><span class="p">:</span> <span class="mf">1.3833</span><span class="p">,</span>
    <span class="mi">31</span><span class="p">:</span> <span class="mf">22.5</span><span class="p">,</span> <span class="mi">32</span><span class="p">:</span> <span class="mf">0.0045999999999999999</span><span class="p">,</span> <span class="mi">33</span><span class="p">:</span> <span class="mf">0.095399999999999999</span><span class="p">,</span> <span class="mi">34</span><span class="p">:</span> <span class="mf">7.25</span><span class="p">,</span> <span class="mi">35</span><span class="p">:</span> <span class="mf">16.436800000000002</span><span class="p">,</span>
    <span class="mi">36</span><span class="p">:</span> <span class="o">-</span><span class="mf">56.557899999999997</span><span class="p">,</span> <span class="mi">37</span><span class="p">:</span> <span class="o">-</span><span class="mf">59.9923</span><span class="p">,</span> <span class="mi">38</span><span class="p">:</span> <span class="mf">0.21310000000000001</span><span class="p">,</span> <span class="mi">39</span><span class="p">:</span> <span class="mf">1.8647</span><span class="p">},</span>
    <span class="s1">&#39;objective&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;bAP_spikecount&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;bAP_APheight&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;bAP_APwidth&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;bAP_att2&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;bAP_att3&#39;</span><span class="p">,</span>
    <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;BAC_ahpdepth&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="s1">&#39;BAC_APheight&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="s1">&#39;BAC_ISI&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="s1">&#39;BAC_caSpike_height&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="s1">&#39;BAC_caSpike_width&#39;</span><span class="p">,</span>
    <span class="mi">10</span><span class="p">:</span> <span class="s1">&#39;BAC_spikecount&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="s1">&#39;mf1&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="s1">&#39;AI1&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="s1">&#39;ISIcv1&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="s1">&#39;DI1&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="s1">&#39;TTFS1&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="s1">&#39;APh1&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="s1">&#39;fAHPd1&#39;</span><span class="p">,</span>
    <span class="mi">18</span><span class="p">:</span> <span class="s1">&#39;sAHPd1&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="s1">&#39;sAHPt1&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="s1">&#39;APw1&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">:</span> <span class="s1">&#39;mf2&#39;</span><span class="p">,</span> <span class="mi">22</span><span class="p">:</span> <span class="s1">&#39;AI2&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">:</span> <span class="s1">&#39;ISIcv2&#39;</span><span class="p">,</span> <span class="mi">24</span><span class="p">:</span> <span class="s1">&#39;DI2&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">:</span> <span class="s1">&#39;TTFS2&#39;</span><span class="p">,</span>
    <span class="mi">26</span><span class="p">:</span> <span class="s1">&#39;APh2&#39;</span><span class="p">,</span> <span class="mi">27</span><span class="p">:</span> <span class="s1">&#39;fAHPd2&#39;</span><span class="p">,</span> <span class="mi">28</span><span class="p">:</span> <span class="s1">&#39;sAHPd2&#39;</span><span class="p">,</span> <span class="mi">29</span><span class="p">:</span> <span class="s1">&#39;sAHPt2&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">:</span> <span class="s1">&#39;APw2&#39;</span><span class="p">,</span> <span class="mi">31</span><span class="p">:</span> <span class="s1">&#39;mf3&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">:</span> <span class="s1">&#39;AI3&#39;</span><span class="p">,</span> <span class="mi">33</span><span class="p">:</span> <span class="s1">&#39;ISIcv3&#39;</span><span class="p">,</span>
    <span class="mi">34</span><span class="p">:</span> <span class="s1">&#39;TTFS3&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">:</span> <span class="s1">&#39;APh3&#39;</span><span class="p">,</span> <span class="mi">36</span><span class="p">:</span> <span class="s1">&#39;fAHPd3&#39;</span><span class="p">,</span> <span class="mi">37</span><span class="p">:</span> <span class="s1">&#39;sAHPd3&#39;</span><span class="p">,</span> <span class="mi">38</span><span class="p">:</span> <span class="s1">&#39;sAHPt3&#39;</span><span class="p">,</span> <span class="mi">39</span><span class="p">:</span> <span class="s1">&#39;APw3&#39;</span><span class="p">},</span>
    <span class="s1">&#39;std&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>  <span class="mi">1</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>  <span class="mi">2</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>  <span class="mi">3</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>  <span class="mi">4</span><span class="p">:</span> <span class="mf">9.3300000000000001</span><span class="p">,</span>  <span class="mi">5</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span>  <span class="mi">6</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>  <span class="mi">7</span><span class="p">:</span> <span class="mf">0.85170000000000001</span><span class="p">,</span>
    <span class="mi">8</span><span class="p">:</span> <span class="mf">2.54</span><span class="p">,</span>  <span class="mi">9</span><span class="p">:</span> <span class="mf">1.27</span><span class="p">,</span>  <span class="mi">10</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>  <span class="mi">11</span><span class="p">:</span> <span class="mf">0.88</span><span class="p">,</span>  <span class="mi">12</span><span class="p">:</span> <span class="mf">0.0091000000000000004</span><span class="p">,</span>  <span class="mi">13</span><span class="p">:</span> <span class="mf">0.032099999999999997</span><span class="p">,</span>
    <span class="mi">14</span><span class="p">:</span> <span class="mf">33.479999999999997</span><span class="p">,</span>  <span class="mi">15</span><span class="p">:</span> <span class="mf">7.3200000000000003</span><span class="p">,</span>  <span class="mi">16</span><span class="p">:</span> <span class="mf">4.9702999999999999</span><span class="p">,</span>  <span class="mi">17</span><span class="p">:</span> <span class="mf">5.8212999999999999</span><span class="p">,</span>
    <span class="mi">18</span><span class="p">:</span> <span class="mf">4.5814000000000004</span><span class="p">,</span><span class="mi">19</span><span class="p">:</span> <span class="mf">0.029899999999999999</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="mf">0.16650000000000001</span><span class="p">,</span> <span class="mi">21</span><span class="p">:</span> <span class="mf">0.56000000000000005</span><span class="p">,</span>
    <span class="mi">22</span><span class="p">:</span> <span class="mf">0.0055999999999999999</span><span class="p">,</span> <span class="mi">23</span><span class="p">:</span> <span class="mf">0.036799999999999999</span><span class="p">,</span> <span class="mi">24</span><span class="p">:</span> <span class="mf">8.6500000000000004</span><span class="p">,</span> <span class="mi">25</span><span class="p">:</span> <span class="mf">7.3099999999999996</span><span class="p">,</span>
    <span class="mi">26</span><span class="p">:</span> <span class="mf">6.1127000000000002</span><span class="p">,</span> <span class="mi">27</span><span class="p">:</span> <span class="mf">5.5705999999999998</span><span class="p">,</span> <span class="mi">28</span><span class="p">:</span> <span class="mf">4.6717000000000004</span><span class="p">,</span> <span class="mi">29</span><span class="p">:</span> <span class="mf">0.026599999999999999</span><span class="p">,</span>
    <span class="mi">30</span><span class="p">:</span> <span class="mf">0.2843</span><span class="p">,</span> <span class="mi">31</span><span class="p">:</span> <span class="mf">2.2222</span><span class="p">,</span> <span class="mi">32</span><span class="p">:</span> <span class="mf">0.0025999999999999999</span><span class="p">,</span> <span class="mi">33</span><span class="p">:</span> <span class="mf">0.014</span><span class="p">,</span> <span class="mi">34</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">35</span><span class="p">:</span> <span class="mf">6.9321999999999999</span><span class="p">,</span>
    <span class="mi">36</span><span class="p">:</span> <span class="mf">3.5834000000000001</span><span class="p">,</span> <span class="mi">37</span><span class="p">:</span> <span class="mf">3.9247000000000001</span><span class="p">,</span> <span class="mi">38</span><span class="p">:</span> <span class="mf">0.036799999999999999</span><span class="p">,</span> <span class="mi">39</span><span class="p">:</span> <span class="mf">0.41189999999999999</span><span class="p">},</span>
    <span class="s1">&#39;stim_name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;bAP&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;bAP&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;bAP&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;bAP&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;bAP&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span>
    <span class="mi">9</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="s1">&#39;StepOne&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="s1">&#39;StepOne&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="s1">&#39;StepOne&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="s1">&#39;StepOne&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="s1">&#39;StepOne&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="s1">&#39;StepOne&#39;</span><span class="p">,</span>
    <span class="mi">17</span><span class="p">:</span> <span class="s1">&#39;StepOne&#39;</span><span class="p">,</span>  <span class="mi">18</span><span class="p">:</span> <span class="s1">&#39;StepOne&#39;</span><span class="p">,</span>  <span class="mi">19</span><span class="p">:</span> <span class="s1">&#39;StepOne&#39;</span><span class="p">,</span>  <span class="mi">20</span><span class="p">:</span> <span class="s1">&#39;StepOne&#39;</span><span class="p">,</span>  <span class="mi">21</span><span class="p">:</span> <span class="s1">&#39;StepTwo&#39;</span><span class="p">,</span>  <span class="mi">22</span><span class="p">:</span> <span class="s1">&#39;StepTwo&#39;</span><span class="p">,</span>
    <span class="mi">23</span><span class="p">:</span> <span class="s1">&#39;StepTwo&#39;</span><span class="p">,</span>  <span class="mi">24</span><span class="p">:</span> <span class="s1">&#39;StepTwo&#39;</span><span class="p">,</span>  <span class="mi">25</span><span class="p">:</span> <span class="s1">&#39;StepTwo&#39;</span><span class="p">,</span>  <span class="mi">26</span><span class="p">:</span> <span class="s1">&#39;StepTwo&#39;</span><span class="p">,</span>  <span class="mi">27</span><span class="p">:</span> <span class="s1">&#39;StepTwo&#39;</span><span class="p">,</span>  <span class="mi">28</span><span class="p">:</span> <span class="s1">&#39;StepTwo&#39;</span><span class="p">,</span>
    <span class="mi">29</span><span class="p">:</span> <span class="s1">&#39;StepTwo&#39;</span><span class="p">,</span>  <span class="mi">30</span><span class="p">:</span> <span class="s1">&#39;StepTwo&#39;</span><span class="p">,</span>  <span class="mi">31</span><span class="p">:</span> <span class="s1">&#39;StepThree&#39;</span><span class="p">,</span>  <span class="mi">32</span><span class="p">:</span> <span class="s1">&#39;StepThree&#39;</span><span class="p">,</span>  <span class="mi">33</span><span class="p">:</span> <span class="s1">&#39;StepThree&#39;</span><span class="p">,</span>  <span class="mi">34</span><span class="p">:</span> <span class="s1">&#39;StepThree&#39;</span><span class="p">,</span>
    <span class="mi">35</span><span class="p">:</span> <span class="s1">&#39;StepThree&#39;</span><span class="p">,</span>  <span class="mi">36</span><span class="p">:</span> <span class="s1">&#39;StepThree&#39;</span><span class="p">,</span>  <span class="mi">37</span><span class="p">:</span> <span class="s1">&#39;StepThree&#39;</span><span class="p">,</span>  <span class="mi">38</span><span class="p">:</span> <span class="s1">&#39;StepThree&#39;</span><span class="p">,</span>  <span class="mi">39</span><span class="p">:</span> <span class="s1">&#39;StepThree&#39;</span><span class="p">},</span>
    <span class="s1">&#39;stim_type&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;bAP&#39;</span><span class="p">,</span>  <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;bAP&#39;</span><span class="p">,</span>  <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;bAP&#39;</span><span class="p">,</span>  <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;bAP&#39;</span><span class="p">,</span>  <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;bAP&#39;</span><span class="p">,</span>  <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span>  <span class="mi">6</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span>  <span class="mi">7</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span>
    <span class="mi">8</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span>  <span class="mi">9</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span>  <span class="mi">10</span><span class="p">:</span> <span class="s1">&#39;BAC&#39;</span><span class="p">,</span>  <span class="mi">11</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">12</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">13</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>
    <span class="mi">14</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">16</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">17</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">18</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>
    <span class="mi">19</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">20</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">21</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">22</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">23</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>
    <span class="mi">24</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">25</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">26</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">27</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">28</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>
    <span class="mi">29</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">30</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">31</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">32</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">33</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>
    <span class="mi">34</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">35</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">36</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">37</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>  <span class="mi">38</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">,</span>
    <span class="mi">39</span><span class="p">:</span> <span class="s1">&#39;SquarePulse&#39;</span><span class="p">}}</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></div>
    

<span class="c1"># def get_hay_problem_description():</span>
<span class="c1">#     setup_hay_evaluator()</span>
<span class="c1">#     sol = h.mc.get_sol()</span>
<span class="c1">#     stim_count = int(h.mc.get_stimulus_num())    </span>
<span class="c1">#     stims = [sol.o(cur_stim).get_type().s for cur_stim in range(stim_count)]  </span>
    
<span class="c1">#     objective_names = []</span>
<span class="c1">#     feature_types = []</span>
<span class="c1">#     stim_types = []</span>
<span class="c1">#     stim_names = []</span>
<span class="c1">#     mean = []</span>
<span class="c1">#     std = []</span>
<span class="c1">#     for lv in range(int(sol.count())):</span>
<span class="c1">#         for i in range (len(h.evaluator.stimulus_feature_type_list.o(lv))):</span>
<span class="c1">#             objective_names.append(h.evaluator.stimulus_feature_name_list.o(lv).o(i).s)</span>
<span class="c1">#             feature_types.append(h.evaluator.stimulus_feature_type_list.o(lv).o(i).s)</span>
<span class="c1">#             stim_types.append(sol.o(lv).get_type().s)</span>
<span class="c1">#             stim_names.append(sol.o(lv).get_name().s)</span>
<span class="c1">#             mean.append(h.evaluator.feature_mean_list.o(lv)[i])</span>
<span class="c1">#             std.append(h.evaluator.feature_std_list.o(lv)[i])</span>
<span class="c1">#     return I.pd.DataFrame(dict(objective = objective_names, </span>
<span class="c1">#                                feature = feature_types,</span>
<span class="c1">#                                stim_type = stim_types,</span>
<span class="c1">#                                stim_name = stim_names, </span>
<span class="c1">#                                mean = mean, std = std))[[&#39;objective&#39;, &#39;feature&#39;, </span>
<span class="c1">#                                                          &#39;stim_name&#39;, &#39;stim_type&#39;,</span>
<span class="c1">#                                                          &#39;mean&#39;, &#39;std&#39;]]</span>

<span class="c1">##############################################</span>
<span class="c1"># used to test reproducibility</span>
<span class="c1">##############################################</span>

<div class="viewcode-block" id="get_feasible_model_params"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.get_feasible_model_params">[docs]</a><span class="k">def</span> <span class="nf">get_feasible_model_params</span><span class="p">():</span>
    <span class="n">pdf</span> <span class="o">=</span> <span class="n">get_hay_params_pdf</span><span class="p">()</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.971849</span><span class="p">,</span>   <span class="mf">0.000363</span><span class="p">,</span>   <span class="mf">0.008663</span><span class="p">,</span>   <span class="mf">0.099860</span><span class="p">,</span>   <span class="mf">0.073318</span><span class="p">,</span>   <span class="mf">0.359781</span><span class="p">,</span>   <span class="mf">0.000530</span><span class="p">,</span>   
         <span class="mf">0.004958</span><span class="p">,</span>   <span class="mf">0.000545</span><span class="p">,</span> <span class="mf">342.880108</span><span class="p">,</span>   <span class="mf">3.755353</span><span class="p">,</span>   <span class="mf">0.002518</span><span class="p">,</span>   <span class="mf">0.025765</span><span class="p">,</span>   <span class="mf">0.060558</span><span class="p">,</span>   
         <span class="mf">0.082471</span><span class="p">,</span>   <span class="mf">0.922328</span><span class="p">,</span>   <span class="mf">0.000096</span><span class="p">,</span>   <span class="mf">0.000032</span><span class="p">,</span>   <span class="mf">0.005209</span><span class="p">,</span> <span class="mf">248.822554</span><span class="p">,</span>   <span class="mf">0.000025</span><span class="p">,</span>   
         <span class="mf">0.000047</span><span class="p">,</span>   <span class="mf">0.000074</span><span class="p">,</span>   <span class="mf">0.000039</span><span class="p">,</span>   <span class="mf">0.000436</span><span class="p">,</span>   <span class="mf">0.016033</span><span class="p">,</span>   <span class="mf">0.008445</span><span class="p">,</span>   <span class="mf">0.004921</span><span class="p">,</span>   
         <span class="mf">0.003024</span><span class="p">,</span>   <span class="mf">0.003099</span><span class="p">,</span>   <span class="mf">0.0005</span><span class="p">,</span>   <span class="mf">116.339356</span><span class="p">]</span>  
    <span class="n">pdf</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">pdf</span></div>

<div class="viewcode-block" id="get_feasible_model_objectives"><a class="viewcode-back" href="../../modules/biophysics_fitting.html#biophysics_fitting.hay_complete_default_setup.get_feasible_model_objectives">[docs]</a><span class="k">def</span> <span class="nf">get_feasible_model_objectives</span><span class="p">():</span>
    <span class="n">pdf</span> <span class="o">=</span> <span class="n">get_hay_problem_description</span><span class="p">()</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">get_hay_objective_names</span><span class="p">()</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1.647</span><span class="p">,</span>  <span class="mf">3.037</span><span class="p">,</span> <span class="mf">0.</span>   <span class="p">,</span>  <span class="mf">2.008</span><span class="p">,</span>  <span class="mf">2.228</span><span class="p">,</span>  <span class="mf">0.385</span><span class="p">,</span>  <span class="mf">1.745</span><span class="p">,</span>  <span class="mf">1.507</span><span class="p">,</span>
         <span class="mf">0.358</span><span class="p">,</span>  <span class="mf">1.454</span><span class="p">,</span>  <span class="mf">0.</span>   <span class="p">,</span>  <span class="mf">0.568</span><span class="p">,</span>  <span class="mf">0.893</span><span class="p">,</span>  <span class="mf">0.225</span><span class="p">,</span>  <span class="mf">0.75</span> <span class="p">,</span>  <span class="mf">2.78</span> <span class="p">,</span>
         <span class="mf">0.194</span><span class="p">,</span>  <span class="mf">1.427</span><span class="p">,</span>  <span class="mf">3.781</span><span class="p">,</span>  <span class="mf">5.829</span><span class="p">,</span>  <span class="mf">1.29</span> <span class="p">,</span>  <span class="mf">0.268</span><span class="p">,</span>  <span class="mf">0.332</span><span class="p">,</span>  <span class="mf">1.281</span><span class="p">,</span>
         <span class="mf">0.831</span><span class="p">,</span>  <span class="mf">1.931</span><span class="p">,</span>  <span class="mf">0.243</span><span class="p">,</span>  <span class="mf">1.617</span><span class="p">,</span>  <span class="mf">1.765</span><span class="p">,</span>  <span class="mf">1.398</span><span class="p">,</span>  <span class="mf">1.126</span><span class="p">,</span>  <span class="mf">0.65</span> <span class="p">,</span>
         <span class="mf">0.065</span><span class="p">,</span>  <span class="mf">0.142</span><span class="p">,</span>  <span class="mf">5.628</span><span class="p">,</span>  <span class="mf">6.852</span><span class="p">,</span>  <span class="mf">2.947</span><span class="p">,</span>  <span class="mf">1.771</span><span class="p">,</span>  <span class="mf">1.275</span><span class="p">,</span>  <span class="mf">2.079</span><span class="p">]</span>  
    <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">index</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;objective&#39;</span><span class="p">,</span> <span class="n">drop</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">pdf</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>
    <span class="k">return</span> <span class="n">pdf</span></div>

<span class="kn">from</span> <span class="nn">.hay_evaluation</span> <span class="kn">import</span> <span class="n">hay_evaluate_BAC</span><span class="p">,</span> <span class="n">hay_evaluate_bAP</span><span class="p">,</span> <span class="n">hay_evaluate_StepOne</span><span class="p">,</span> <span class="n">hay_evaluate_StepTwo</span><span class="p">,</span> <span class="n">hay_evaluate_StepThree</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Arco Bast, Amir Najafgholi, Maria Royo Cano, Rieke Fruengel, Matt Keaton, Bjorge Meulemeester, Omar Valerio.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
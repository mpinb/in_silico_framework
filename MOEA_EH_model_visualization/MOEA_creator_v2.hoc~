/*load_file("import3d.hoc")*/
objref tobj, cell
strdef tstr

proc CreateNeuron(){ localobj nl, import
    {sprint(tstr,"%s/%s/%s.hoc",dir,CelltypePath,$s2)	}
    {load_file(1,tstr)}
    sprint(tstr, "tobj = new %s()", $s2)
    execute(tstr)

    sprint(tstr,"%s/%s/%s",dir,MorphologyPath,MorphologyFile)
    $o1 = tobj
//     execute("forall delete_section()", $o1)
    $o1.init()
    $o1.import_morphology(tstr)
	printf("Done with import_morphology()...\n")
	$o1.geom_nseg()
	$o1.biophys()
    
/*	nl = new Import3d_Neurolucida3()
        nl.quiet = 1
	nl.input(tstr)
	import = new Import3d_GUI(nl, 0)    
	import.instantiate($o1)	
        $o1.geom_nseg()
        $o1.biophys() */
        
	forsec $o1.all {
		if(diam == 0){
		     diam =  1
		     printf("Error : Morphology problem with section [%s] 0 dia \n", secname())
		}
    	}
}

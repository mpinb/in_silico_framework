
.. backlink:

:mod:`singlecell_input_mapper` ❭ :mod:`~singlecell_input_mapper.map_singlecell_inputs` ❭ :mod:`~singlecell_input_mapper.map_singlecell_inputs.map_singlecell_inputs`


.. title:

map_singlecell_inputs
=====================


.. py:function:: singlecell_input_mapper.map_singlecell_inputs.map_singlecell_inputs(cellName, cellTypeName, nrOfSamples=50, numberOfCellsSpreadsheetName=numberOfCellsSpreadsheetName, connectionsSpreadsheetName=connectionsSpreadsheetName, ExPSTDensityName=ExPSTDensityName, InhPSTDensityName=InhPSTDensityName, boutonDensityFolderName=boutonDensityFolderName)

   Map inputs to a single cell morphology.

   These inputs need to be organized per anatomical structure. Anatomical structures
   can be arbitrary spatial regions of the brain tissue, or anatomically well-defined
   areas, e.g. barrels in a barrel cortex.

   Steps:

   1. Loads in the data:

       - Cell morphology
       - Number of cells per cell type
       - Connection probabilities between cell types
       - PST densities for normalization of innervation calculations

   2. Loads in the bouton densities:

       - For each anatomical area
       - For each presynaptic cell type

   3. Creates a scalar field (:py:class:`~singlecell\_input\_mapper.singlecell\_input\_mapper.scalar\_field.ScalarField`)
      for each bouton density.
   4. Creates a :py:class:`~singlecell\_input\_mapper.singlecell\_input\_mapper.network\_embedding.NetworkMapper` object.
   5. Creates a network embedding for the cell using
      :py:meth:`~singlecell\_input\_mapper.singlecell\_input\_mapper.network\_embedding.NetworkMapper.create\_network\_embedding`.

   The naming of each anatomical area needs to be consistent between:

   - The number of cells per cell type spreadsheet
   - The bouton folders containing axon traces

   :Parameters: * **cellName** (*str*) -- path to a :ref:`hoc\_file\_format` file containing the morphology of the cell.
                * **cellTypeName** (*str*) -- name of the postsynaptic cell type.
                * **nrOfSamples** (*int*) -- number of samples to use for the network embedding.
                * **numberOfCellsSpreadsheetName** (*str*) -- Path to the a spreadsheet, containing each neuropil structures as columns, and celltypes row indices.
                  Values indicate how much of each celltype was found in each neuropil structure.
                * **connectionsSpreadsheetName** (*str*) -- Path to a spreadsheet, containing the connection probabilities between each presynaptic and postsynaptic cell type.
                * **ExPSTDensityName** (*str*) -- Path to the PST density file for excitatory synapses.
                * **InhPSTDensityName** (*str*) -- Path to the PST density file for inhibitory synapses.
                * **boutonDensityFolderName** -- A directory containing the following subdirectory structure:
                  anatomical\_area/presynaptic\_cell\_type/\*.am

   :returns: None. Writes the results to disk.


.. 
   Warning: we replace underscores with an escape backslash about 4 lines above to avoid having Sphinx interpret arguments as links.
   However, this may cause issues with code blocks or other literal text, and malform markdown tables
   Use with caution?
..